{"ast":null,"code":"// src/components/SustainableBrands.js\nimport React,{useState}from'react';import'./SustainableBrands.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function SustainableBrands(){const[brandName,setBrandName]=useState('');const[analysis,setAnalysis]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState('');// Function to call your Flask backend proxy endpoint\nconst generateContent=async prompt=>{try{const response=await fetch('/api/generate',{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({prompt})});const data=await response.json();if(data.error){throw new Error(data.error);}return data.output;}catch(err){console.error(\"Error in generateContent:\",err);throw err;}};const handleSubmit=async e=>{e.preventDefault();if(!brandName.trim()){setError('Please enter a brand name');return;}setLoading(true);setError('');try{// Build prompt for detailed analysis with context\nconst analysisPrompt=`Gather and process information from various sources—including corporate sustainability reports, news articles, and online reviews—about the brand \"${brandName}\". Provide a detailed analysis of its sustainability efforts (energy efficiency, waste reduction, ethical sourcing, etc.) and include a brief contextual summary. Separate the detailed analysis and context summary with the delimiter \"CONTEXT:\"`;const analysisText=await generateContent(analysisPrompt);let detailedAnalysis=analysisText;let contextSummary=\"No additional context provided.\";if(analysisText.includes(\"CONTEXT:\")){const parts=analysisText.split(\"CONTEXT:\");detailedAnalysis=parts[0].trim();contextSummary=parts[1].trim();}// Build prompt for sustainability score\nconst scorePrompt=`Provide only a JSON object containing the sustainable score of the brand in the following format: {\"score\": \"x%\"} (do not include any additional text)`;const scoreResponseText=await generateContent(scorePrompt);const match=scoreResponseText.match(/(\\d+)%/);let scoreValue=match?parseFloat(match[1]):50;setAnalysis({brandName:brandName.trim(),analysis:detailedAnalysis,context:contextSummary,score:scoreValue});}catch(err){console.error('Error analyzing brand:',err);setError('Failed to analyze brand. Please try again.');}finally{setLoading(false);}};const renderGaugeMeter=()=>{if(!analysis)return null;const{score}=analysis;const angle=score/100*180;return/*#__PURE__*/_jsx(\"div\",{className:\"gauge-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"gauge\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"gauge-fill\",style:{transform:`rotate(${angle}deg)`,backgroundColor:score>50?'#4CAF50':'#FF5252'}}),/*#__PURE__*/_jsx(\"div\",{className:\"gauge-cover\",children:/*#__PURE__*/_jsxs(\"span\",{children:[score,\"%\"]})})]})});};return/*#__PURE__*/_jsxs(\"div\",{className:\"sustainable-brands\",children:[/*#__PURE__*/_jsxs(\"video\",{autoPlay:true,loop:true,muted:true,playsInline:true,className:\"bg-video\",children:[/*#__PURE__*/_jsx(\"source\",{src:\"https://cdn.pixabay.com/video/2017/01/12/7241-199190972_large.mp4\",type:\"video/mp4\"}),\"Your browser does not support the video tag.\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"video-overlay\"}),/*#__PURE__*/_jsx(\"h1\",{children:\"Is Your Favorite Brand Sustainable-friendly?\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:brandName,onChange:e=>setBrandName(e.target.value),placeholder:\"Enter brand name...\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Analyzing...':'Analyze Brand'})]}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error})]}),analysis&&/*#__PURE__*/_jsxs(\"div\",{className:\"analysis-results\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"Sustainability Analysis for \",analysis.brandName]}),renderGaugeMeter(),/*#__PURE__*/_jsxs(\"div\",{className:\"analysis-text\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Sustainability Report\"}),/*#__PURE__*/_jsx(\"div\",{className:\"report-content\",children:analysis.analysis.split('\\n').map((paragraph,idx)=>/*#__PURE__*/_jsx(\"p\",{children:paragraph},idx))}),/*#__PURE__*/_jsxs(\"div\",{className:\"analysis-context\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Context\"}),/*#__PURE__*/_jsx(\"div\",{className:\"report-content\",children:/*#__PURE__*/_jsx(\"p\",{children:analysis.context})})]})]})]})]});}export default SustainableBrands;","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","SustainableBrands","brandName","setBrandName","analysis","setAnalysis","loading","setLoading","error","setError","generateContent","prompt","response","fetch","method","headers","body","JSON","stringify","data","json","Error","output","err","console","handleSubmit","e","preventDefault","trim","analysisPrompt","analysisText","detailedAnalysis","contextSummary","includes","parts","split","scorePrompt","scoreResponseText","match","scoreValue","parseFloat","context","score","renderGaugeMeter","angle","className","children","style","transform","backgroundColor","autoPlay","loop","muted","playsInline","src","type","onSubmit","value","onChange","target","placeholder","required","disabled","map","paragraph","idx"],"sources":["C:/Users/Hardik/OneDrive/Desktop/EcoMark/frontend/src/components/SustainableBrands.js"],"sourcesContent":["// src/components/SustainableBrands.js\r\nimport React, { useState } from 'react';\r\nimport './SustainableBrands.css';\r\n\r\nfunction SustainableBrands() {\r\n  const [brandName, setBrandName] = useState('');\r\n  const [analysis, setAnalysis] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n\r\n  // Function to call your Flask backend proxy endpoint\r\n  const generateContent = async (prompt) => {\r\n    try {\r\n      const response = await fetch('/api/generate', {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({ prompt })\r\n      });\r\n      const data = await response.json();\r\n      if (data.error) {\r\n        throw new Error(data.error);\r\n      }\r\n      return data.output;\r\n    } catch (err) {\r\n      console.error(\"Error in generateContent:\", err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!brandName.trim()) {\r\n      setError('Please enter a brand name');\r\n      return;\r\n    }\r\n    setLoading(true);\r\n    setError('');\r\n    try {\r\n      // Build prompt for detailed analysis with context\r\n      const analysisPrompt = `Gather and process information from various sources—including corporate sustainability reports, news articles, and online reviews—about the brand \"${brandName}\". Provide a detailed analysis of its sustainability efforts (energy efficiency, waste reduction, ethical sourcing, etc.) and include a brief contextual summary. Separate the detailed analysis and context summary with the delimiter \"CONTEXT:\"`;\r\n      const analysisText = await generateContent(analysisPrompt);\r\n      let detailedAnalysis = analysisText;\r\n      let contextSummary = \"No additional context provided.\";\r\n      if (analysisText.includes(\"CONTEXT:\")) {\r\n        const parts = analysisText.split(\"CONTEXT:\");\r\n        detailedAnalysis = parts[0].trim();\r\n        contextSummary = parts[1].trim();\r\n      }\r\n      \r\n      // Build prompt for sustainability score\r\n      const scorePrompt = `Provide only a JSON object containing the sustainable score of the brand in the following format: {\"score\": \"x%\"} (do not include any additional text)`;\r\n      const scoreResponseText = await generateContent(scorePrompt);\r\n      const match = scoreResponseText.match(/(\\d+)%/);\r\n      let scoreValue = match ? parseFloat(match[1]) : 50;\r\n      \r\n      setAnalysis({\r\n        brandName: brandName.trim(),\r\n        analysis: detailedAnalysis,\r\n        context: contextSummary,\r\n        score: scoreValue\r\n      });\r\n    } catch (err) {\r\n      console.error('Error analyzing brand:', err);\r\n      setError('Failed to analyze brand. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderGaugeMeter = () => {\r\n    if (!analysis) return null;\r\n    const { score } = analysis;\r\n    const angle = (score / 100) * 180;\r\n    return (\r\n      <div className=\"gauge-container\">\r\n        <div className=\"gauge\">\r\n          <div\r\n            className=\"gauge-fill\"\r\n            style={{\r\n              transform: `rotate(${angle}deg)`,\r\n              backgroundColor: score > 50 ? '#4CAF50' : '#FF5252'\r\n            }}\r\n          ></div>\r\n          <div className=\"gauge-cover\">\r\n            <span>{score}%</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"sustainable-brands\">\r\n      {/* Background Video */}\r\n      <video autoPlay loop muted playsInline className=\"bg-video\">\r\n        <source\r\n          src=\"https://cdn.pixabay.com/video/2017/01/12/7241-199190972_large.mp4\"\r\n          type=\"video/mp4\"\r\n        />\r\n        Your browser does not support the video tag.\r\n      </video>\r\n      <div className=\"video-overlay\"></div>\r\n      \r\n      <h1>Is Your Favorite Brand Sustainable-friendly?</h1>\r\n      \r\n      <form onSubmit={handleSubmit}>\r\n        <div className=\"form-group\">\r\n          <input\r\n            type=\"text\"\r\n            value={brandName}\r\n            onChange={(e) => setBrandName(e.target.value)}\r\n            placeholder=\"Enter brand name...\"\r\n            required\r\n          />\r\n          <button type=\"submit\" disabled={loading}>\r\n            {loading ? 'Analyzing...' : 'Analyze Brand'}\r\n          </button>\r\n        </div>\r\n        {error && <p className=\"error\">{error}</p>}\r\n      </form>\r\n      \r\n      {analysis && (\r\n        <div className=\"analysis-results\">\r\n          <h2>Sustainability Analysis for {analysis.brandName}</h2>\r\n          {renderGaugeMeter()}\r\n          <div className=\"analysis-text\">\r\n            <h3>Sustainability Report</h3>\r\n            <div className=\"report-content\">\r\n              {analysis.analysis.split('\\n').map((paragraph, idx) => (\r\n                <p key={idx}>{paragraph}</p>\r\n              ))}\r\n            </div>\r\n            <div className=\"analysis-context\">\r\n              <h3>Context</h3>\r\n              <div className=\"report-content\">\r\n                <p>{analysis.context}</p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default SustainableBrands;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}