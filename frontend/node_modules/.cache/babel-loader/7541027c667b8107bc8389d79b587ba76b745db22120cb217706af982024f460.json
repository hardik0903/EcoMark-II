{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{Line}from'react-chartjs-2';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from'chart.js';import'./EnergyAnalyzer.css';/* Register ChartJS components */import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);function EnergyAnalyzer(){const[monthlyConsumption,setMonthlyConsumption]=useState(500);const[householdSize,setHouseholdSize]=useState(2);const[loading,setLoading]=useState(false);const[results,setResults]=useState(null);/* Handle Form Submission */const handleSubmit=async e=>{e.preventDefault();setLoading(true);try{const response=await axios.post('http://localhost:5000/api/energy-analyzer',{monthlyConsumption:parseFloat(monthlyConsumption),householdSize:parseInt(householdSize)});setResults(response.data);}catch(error){console.error('Error analyzing energy data:',error);}finally{setLoading(false);}};/* Render the Bell Curve Chart with translucent white grid, no axes */const renderBellCurve=()=>{if(!results)return null;const{bellCurveData}=results;const data={labels:bellCurveData.x,datasets:[{label:'Energy Usage Distribution',data:bellCurveData.y.map((val,i)=>({x:bellCurveData.x[i],y:val})),borderColor:'#ffffff',// White line\nbackgroundColor:'rgba(255, 255, 255, 0.2)',// Translucent white fill\nfill:true,tension:0.4},{label:'Your Usage',data:[{x:bellCurveData.usage,y:bellCurveData.usage_y}],backgroundColor:'#ffffff',// White point\nborderColor:'#ffffff',pointRadius:8,pointHoverRadius:10,showLine:false}]};const options={responsive:true,plugins:{legend:{position:'top',labels:{color:'#fff'// White text for legend\n}},title:{display:true,text:'Per Capita Monthly Energy Usage Distribution',color:'#fff',// White text for title\nfont:{family:'Poppins',weight:'700'}},tooltip:{callbacks:{label:context=>{const datasetLabel=context.dataset.label||'';if(context.datasetIndex===1){const usageVal=parseFloat(bellCurveData.usage).toFixed(1);return`${datasetLabel}: ${usageVal} kWh/month`;}return datasetLabel;}}}},scales:{x:{grid:{color:'rgba(255, 255, 255, 0.3)'// Translucent white grid\n},ticks:{display:false// No x-axis labels\n},border:{display:false}},y:{grid:{color:'rgba(255, 255, 255, 0.3)'// Translucent white grid\n},ticks:{display:false// No y-axis labels\n},border:{display:false}}}};return/*#__PURE__*/_jsx(Line,{data:data,options:options});};return/*#__PURE__*/_jsxs(\"div\",{className:\"energy-analyzer\",children:[/*#__PURE__*/_jsxs(\"video\",{autoPlay:true,loop:true,muted:true,playsInline:true,className:\"energy-bg-video\",children:[/*#__PURE__*/_jsx(\"source\",{src:\"https://cdn.pixabay.com/video/2022/06/21/121429-724697304_large.mp4\",type:\"video/mp4\"}),\"Your browser does not support the video tag.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"energy-analyzer-content\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u26A1Sustainable Energy Consumption Analyzer\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"energy-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Total Monthly Household Energy Consumption (kWh)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:monthlyConsumption,onChange:e=>setMonthlyConsumption(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Number of People in Your Household\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",value:householdSize,onChange:e=>setHouseholdSize(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Analyzing...':'Analyze'})]}),results&&/*#__PURE__*/_jsxs(\"div\",{className:\"results\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chart-container\",children:renderBellCurve()}),/*#__PURE__*/_jsxs(\"div\",{className:\"score-section\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Sustainability Score \\uD83C\\uDF43\"}),/*#__PURE__*/_jsxs(\"p\",{children:[results.sustainabilityScore.toFixed(2),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"recommendations\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Personalized Recommendations\"}),/*#__PURE__*/_jsx(\"ul\",{children:results.recommendations.map((recommendation,index)=>/*#__PURE__*/_jsx(\"li\",{children:recommendation},index))})]})]})]})]});}export default EnergyAnalyzer;","map":{"version":3,"names":["React","useState","axios","Line","Chart","ChartJS","CategoryScale","LinearScale","PointElement","LineElement","Title","Tooltip","Legend","jsx","_jsx","jsxs","_jsxs","register","EnergyAnalyzer","monthlyConsumption","setMonthlyConsumption","householdSize","setHouseholdSize","loading","setLoading","results","setResults","handleSubmit","e","preventDefault","response","post","parseFloat","parseInt","data","error","console","renderBellCurve","bellCurveData","labels","x","datasets","label","y","map","val","i","borderColor","backgroundColor","fill","tension","usage","usage_y","pointRadius","pointHoverRadius","showLine","options","responsive","plugins","legend","position","color","title","display","text","font","family","weight","tooltip","callbacks","context","datasetLabel","dataset","datasetIndex","usageVal","toFixed","scales","grid","ticks","border","className","children","autoPlay","loop","muted","playsInline","src","type","onSubmit","min","value","onChange","target","required","disabled","sustainabilityScore","recommendations","recommendation","index"],"sources":["C:/Users/Hardik/OneDrive/Desktop/EcoMark/frontend/src/components/EnergyAnalyzer.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Line } from 'react-chartjs-2';\r\nimport {\r\n  Chart as ChartJS,\r\n  CategoryScale,\r\n  LinearScale,\r\n  PointElement,\r\n  LineElement,\r\n  Title,\r\n  Tooltip,\r\n  Legend,\r\n} from 'chart.js';\r\nimport './EnergyAnalyzer.css';\r\n\r\n/* Register ChartJS components */\r\nChartJS.register(CategoryScale, LinearScale, PointElement, LineElement, Title, Tooltip, Legend);\r\n\r\nfunction EnergyAnalyzer() {\r\n  const [monthlyConsumption, setMonthlyConsumption] = useState(500);\r\n  const [householdSize, setHouseholdSize] = useState(2);\r\n  const [loading, setLoading] = useState(false);\r\n  const [results, setResults] = useState(null);\r\n\r\n  /* Handle Form Submission */\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/api/energy-analyzer', {\r\n        monthlyConsumption: parseFloat(monthlyConsumption),\r\n        householdSize: parseInt(householdSize),\r\n      });\r\n      setResults(response.data);\r\n    } catch (error) {\r\n      console.error('Error analyzing energy data:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  /* Render the Bell Curve Chart with translucent white grid, no axes */\r\n  const renderBellCurve = () => {\r\n    if (!results) return null;\r\n\r\n    const { bellCurveData } = results;\r\n\r\n    const data = {\r\n      labels: bellCurveData.x,\r\n      datasets: [\r\n        {\r\n          label: 'Energy Usage Distribution',\r\n          data: bellCurveData.y.map((val, i) => ({ x: bellCurveData.x[i], y: val })),\r\n          borderColor: '#ffffff',          // White line\r\n          backgroundColor: 'rgba(255, 255, 255, 0.2)', // Translucent white fill\r\n          fill: true,\r\n          tension: 0.4,\r\n        },\r\n        {\r\n          label: 'Your Usage',\r\n          data: [\r\n            {\r\n              x: bellCurveData.usage,\r\n              y: bellCurveData.usage_y,\r\n            },\r\n          ],\r\n          backgroundColor: '#ffffff',  // White point\r\n          borderColor: '#ffffff',\r\n          pointRadius: 8,\r\n          pointHoverRadius: 10,\r\n          showLine: false,\r\n        },\r\n      ],\r\n    };\r\n\r\n    const options = {\r\n      responsive: true,\r\n      plugins: {\r\n        legend: {\r\n          position: 'top',\r\n          labels: {\r\n            color: '#fff', // White text for legend\r\n          },\r\n        },\r\n        title: {\r\n          display: true,\r\n          text: 'Per Capita Monthly Energy Usage Distribution',\r\n          color: '#fff', // White text for title\r\n          font: {\r\n            family: 'Poppins',\r\n            weight: '700',\r\n          },\r\n        },\r\n        tooltip: {\r\n          callbacks: {\r\n            label: (context) => {\r\n              const datasetLabel = context.dataset.label || '';\r\n              if (context.datasetIndex === 1) {\r\n                const usageVal = parseFloat(bellCurveData.usage).toFixed(1);\r\n                return `${datasetLabel}: ${usageVal} kWh/month`;\r\n              }\r\n              return datasetLabel;\r\n            },\r\n          },\r\n        },\r\n      },\r\n      scales: {\r\n        x: {\r\n          grid: {\r\n            color: 'rgba(255, 255, 255, 0.3)', // Translucent white grid\r\n          },\r\n          ticks: {\r\n            display: false, // No x-axis labels\r\n          },\r\n          border: { display: false },\r\n        },\r\n        y: {\r\n          grid: {\r\n            color: 'rgba(255, 255, 255, 0.3)', // Translucent white grid\r\n          },\r\n          ticks: {\r\n            display: false, // No y-axis labels\r\n          },\r\n          border: { display: false },\r\n        },\r\n      },\r\n    };\r\n\r\n    return <Line data={data} options={options} />;\r\n  };\r\n\r\n  return (\r\n    <div className=\"energy-analyzer\">\r\n      {/* Updated background video */}\r\n      <video autoPlay loop muted playsInline className=\"energy-bg-video\">\r\n        <source\r\n          src=\"https://cdn.pixabay.com/video/2022/06/21/121429-724697304_large.mp4\"\r\n          type=\"video/mp4\"\r\n        />\r\n        Your browser does not support the video tag.\r\n      </video>\r\n\r\n      <div className=\"energy-analyzer-content\">\r\n        <h1>⚡Sustainable Energy Consumption Analyzer</h1>\r\n\r\n        {/* Form */}\r\n        <form onSubmit={handleSubmit} className=\"energy-form\">\r\n          <div className=\"form-group\">\r\n            <label>Total Monthly Household Energy Consumption (kWh)</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"0\"\r\n              value={monthlyConsumption}\r\n              onChange={(e) => setMonthlyConsumption(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <label>Number of People in Your Household</label>\r\n            <input\r\n              type=\"number\"\r\n              min=\"1\"\r\n              value={householdSize}\r\n              onChange={(e) => setHouseholdSize(e.target.value)}\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <button type=\"submit\" disabled={loading}>\r\n            {loading ? 'Analyzing...' : 'Analyze'}\r\n          </button>\r\n        </form>\r\n\r\n        {results && (\r\n          <div className=\"results\">\r\n            <div className=\"chart-container\">{renderBellCurve()}</div>\r\n\r\n            {/* Just display the sustainability score as text */}\r\n            <div className=\"score-section\">\r\n              <h2>Your Sustainability Score 🍃</h2>\r\n              <p>{results.sustainabilityScore.toFixed(2)}%</p>\r\n            </div>\r\n\r\n            <div className=\"recommendations\">\r\n              <h2>Personalized Recommendations</h2>\r\n              <ul>\r\n                {results.recommendations.map((recommendation, index) => (\r\n                  <li key={index}>{recommendation}</li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EnergyAnalyzer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}